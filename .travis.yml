matrix:
  include:
    - language: R
      before_install:
        - cd R-package
      cache: packages
      after_success:
        - travis_wait 40 Rscript -e 'covr::codecov(path = ".", quiet = FALSE, type = c("vignettes", "examples", "tests"), flags = "R")'

    - dist: xenial
      language: python
      python:
        - "3.7"

      addons:
        apt:
          packages:
            - swig

      # command to install dependencies
      install:
        - pip install -r ./python/requirements.txt
        - pip install pytest
        - pip install pytest-cov
        - pip install scikit-learn
        - pip install codecov
        - pip install gcovr
        - export CFLAGS="--coverage"
        - python ./python/setup.py install

      # command to run tests
      script:  
        - ls *
        - travis_wait 120 pytest ./ --cov=./ --cov-report=xml
        - gcovr ./python/src/ --xml 
        - ls *
        
      after_success:
        - codecov -F Python -g ./python/include/* # run codecov


